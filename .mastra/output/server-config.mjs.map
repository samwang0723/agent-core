{"version":3,"file":"server-config.mjs","sources":["../../src/mastra/index.ts"],"sourcesContent":["import { Mastra } from \"@mastra/core\";\nimport { weatherAgentWithWorkflow } from \"./agents/weather\";\nimport { weatherWorkflowWithSuspend } from \"./workflows/weather\";\n\nexport const mastra: Mastra = new Mastra({\n  server: {\n    port: 3000, // Defaults to 4111\n    timeout: 10000, // Defaults to 30000 (30s)\n    cors: {\n      origin: [\"*\"], // Allow specific origins or '*' for all\n      allowMethods: [\"GET\", \"POST\", \"PUT\", \"DELETE\", \"OPTIONS\"],\n      allowHeaders: [\"Content-Type\", \"Authorization\"],\n      credentials: false,\n    },\n    middleware: [\n      {\n        handler: async (c, next) => {\n          // Example: Add authentication check\n          const authHeader = c.req.header(\"Authorization\");\n          if (!authHeader) {\n            return new Response(\"Unauthorized\", { status: 401 });\n          }\n \n          await next();\n        },\n        path: \"/api/*\",\n      },\n      // Add a global request logger\n      async (c, next) => {\n        console.log(`${c.req.method} ${c.req.url}`);\n        await next();\n      },\n    ],\n  },\n  agents: { weatherAgentWithWorkflow },\n  workflows: { weatherWorkflowWithSuspend },\n});\n\n// const agent = mastra.getAgent('weatherAgentWithWorkflow');\n// const result = await agent.generate([\n//   {\n//     role: 'user',\n//     content: 'London',\n//   },\n// ]);\n\n// console.log(result);"],"names":[],"mappings":"AAKU,MACN,MAAA,GAAA;AAAA,EAAA,IAAA,EAAA,GAAA;AAAA;AAAA,EACA,OAAA,EAAA,GAAA;AAAA;AAAA,EACA,IAAA,EAAM;AAAA,IACK,MAAA,EAAA,CAAA,GAAA,CAAA;AAAA;AAAA,IAC+C,cACxD,CAAA,KAAA,EAAA,MAAA,EAAA,KAAA,EAAe,UAAgB,SAAA,CAAA;AAAA,IAAe,YAAA,EAC9C,CAAA,cAAA,EAAA,eAAA,CAAA;AAAA,IAAa,WAAA,EAAA;AAAA,GACf;AAAA,EACA,UAAA,EAAA;AAAA,IAAA;AAAA,MAAA,OAAA,EAAY,OACV,CAAA,EAAA,IAAA,KAAA;AAAA,QAAA,MAAA,UAAA,GACE,CAAA,CAAgB,GAAA,CAAG,MAAA,CAAA,eAAS,CAAA;AAE1B,QAAA,IAAA,CAAA,UAAA,EAAA;AACA,UAAA,OAAA,IAAK,yBAAY;AAAA,YAAA,MAAA,EACf;AAAA,WAAA,CAAA;AAAA,QAAmD;AAG1C,QAAA,MAAA,IAAA,EACb;AAAA,MAAA,CAAA;AAAA,MAAA,IAAA,EACM;AAAA,KACR;AAAA;AAAA,IAAA,OAGE,YAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,KAAW,GAAA,CAAA,UAAA,CAAA,CAAA,GAAA,CAAA,GAAA,CAAA,CAAA,CAAA;AAAA,MAAA,MAAA,IAAA,EACb;AAAA,IAAA;AAAA;AAAA;;;;"}